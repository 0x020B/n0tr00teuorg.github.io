FixItDecryptor=function(e={}){var n,t=FixItDecryptor.prototype;this.options=e||{},this.options.duration=this.options.duration||24*60*60,this.decryptedEventSet=new Set,this.resetEventSet=new Set,this.$el=document.querySelector(".fixit-decryptor-container"),n=e=>{try{this.$el.querySelector(".fixit-decryptor-loading").classList.add("d-none"),this.$el.querySelector("#fixit-decryptor-input").classList.add("d-none"),this.$el.querySelector(".fixit-encryptor-btn").classList.remove("d-none"),document.querySelector("#content").insertAdjacentHTML("afterbegin",CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8))}catch(e){return console.error(e)}console.log(this.decryptedEventSet);for(const e of this.decryptedEventSet)e()},t.init=()=>{this.addEventListener("decrypted",this.options?.decrypted),this.addEventListener("reset",this.options?.reset),this.validateCache();const e=this;this.$el.querySelector("#fixit-decryptor-input")?.addEventListener("keydown",function(t){if(t.key==="Enter"){t.preventDefault();const o=document.querySelector("#content"),c=o.getAttribute("data-password"),s=this.value.trim(),i=s.length%2?s.length:s.length+1,a=CryptoJS.MD5(s).toString(),r=CryptoJS.SHA256(s).toString();if(this.value="",this.blur(),!s)return alert("Please enter the correct password!"),console.warn("Please enter the correct password!");if(a!==c)return alert(`Password error: ${s} not the correct password!`),console.warn(`Password error: ${s} not the correct password!`);window.localStorage?.setItem(`fixit-decryptor/#${location.pathname}`,JSON.stringify({expiration:Math.ceil(Date.now()/1e3)+e.options.duration,md5:a,sha256:r.slice(i)})),n(o.getAttribute("data-content").replace(r.slice(i),""))}}),this.$el.querySelector(".fixit-encryptor-btn")?.addEventListener("click",function(t){t.preventDefault(),this.classList.add("d-none"),e.$el.querySelector("#fixit-decryptor-input").classList.remove("d-none"),document.querySelector("#content").innerHTML="",document.querySelector("#content").insertAdjacentElement("afterbegin",e.$el),window.localStorage?.removeItem(`fixit-decryptor/#${location.pathname}`);for(const t of e.resetEventSet)t()})},t.initShortcodes=()=>{const t=this,e=document.querySelectorAll("fixit-encryptor:not(.decrypted)");e.forEach(e=>{e.querySelector(".fixit-decryptor-input")?.addEventListener("keydown",function(e){if(e.key==="Enter"){e.preventDefault();const n=this.parentElement.parentElement,s=n.nextElementSibling,o=s.getAttribute("data-password"),t=this.value.trim(),i=t.length%2?t.length:t.length+1,a=CryptoJS.MD5(t).toString(),r=CryptoJS.SHA256(t).toString();if(this.value="",this.blur(),!t)return alert("Please enter the correct password!"),console.warn("Please enter the correct password!");if(a!==o)return alert(`Password error: ${t} not the correct password!`),console.warn(`Password error: ${t} not the correct password!`);try{const e=s.getAttribute("data-content").replace(r.slice(i),"");n.querySelector(".fixit-decryptor-input").classList.add("d-none"),s.insertAdjacentHTML("afterbegin",CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8)),n.parentElement.classList.add("decrypted")}catch(e){return console.error(e)}}})})},t.validateCache=()=>{const t=document.querySelector("#content"),s=t.getAttribute("data-password"),e=JSON.parse(window.localStorage?.getItem(`fixit-decryptor/#${location.pathname}`));return e?e?.md5!==s||Number(e?.expiration)<Math.ceil(Date.now()/1e3)?(this.$el.querySelector(".fixit-decryptor-loading").classList.add("d-none"),this.$el.querySelector("#fixit-decryptor-input").classList.remove("d-none"),window.localStorage?.removeItem(`fixit-decryptor/#${location.pathname}`),console.warn("The password has expired, please re-enter!"),this):(n(t.getAttribute("data-content").replace(e.sha256,"")),this):(this.$el.querySelector(".fixit-decryptor-loading").classList.add("d-none"),this.$el.querySelector("#fixit-decryptor-input").classList.remove("d-none"),this)},t.addEventListener=(e,t)=>{if(typeof t!="function")return this;switch(e){case"decrypted":this.decryptedEventSet.add(t);break;case"reset":this.resetEventSet.add(t);break;default:console.warn(`Event ${e} not found in FixIt Decryptor!`);break}return this},t.removeEventListener=(e,t)=>{if(typeof t!="function")return this;switch(e){case"decrypted":this.decryptedEventSet.delete(t);break;case"reset":this.resetEventSet.delete(t);break;default:console.warn(`Event ${e} not found in FixIt Decryptor!`);break}return this}}